<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Undangan — Lina & Faqih</title>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --accent:#2366b3; /* biru */
      --glass: rgba(255,255,255,0.78);
      --card: rgba(255,255,255,0.9);
      --muted:#f3f6fb;
      --radius:14px;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Poppins,system-ui,Arial;background:#0b0f14;color:#0d1117}

    /* viewport / flow */
    .viewport{height:100vh;overflow-y:auto;scroll-behavior:smooth;scroll-snap-type:y mandatory}
    .slide{min-height:100vh;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:28px;position:relative;scroll-snap-align:start}

    /* A4 transparent frame styling (used on slidess) */
    .a4-frame{width:820px;max-width:94%;background:transparent;padding:20px;border-radius:12px}

    /* common image helpers */
    img{display:block;max-width:100%;height:auto}

    /* ==== SLIDE 1 ==== */
    .cover{background:url('bgistana.jpg') center/cover no-repeat}
    .cover .panel{width:820px;max-width:92%;background:linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.85));padding:26px;border-radius:14px;text-align:center;box-shadow:0 8px 30px rgba(2,6,23,0.45)}
    .cover .couple{width:220px;height:220px;border-radius:12px;object-fit:cover}
    .cover .names{font-family:'Great Vibes',cursive;color:var(--accent);font-size:46px;margin-top:6px}
    .cover p{margin:10px 0}
    .cover .to-name{font-weight:600;margin-top:18px}
    .open-btn{display:inline-flex;align-items:center;gap:10px;margin-top:18px;padding:12px 18px;border-radius:999px;background:var(--accent);color:white;cursor:pointer;font-weight:600}
    .badge-top{position:absolute;right:18px;top:18px;width:64px}
    .badge-bottom{position:absolute;left:18px;bottom:18px;width:64px}

    /* LOCK overlay while closed */
    .locked{position:absolute;inset:0;background:linear-gradient(0deg, rgba(0,0,0,0.35), rgba(0,0,0,0.18));display:flex;align-items:center;justify-content:center;z-index:40}

    /* ==== SLIDE 2 ==== */
    .happy{background:url('suasana.jpg') center/cover no-repeat;padding-top:60px}
    .happy .hero{position:relative;width:100%;max-width:1100px;margin:0 auto}
    .happy .happy-text{font-family:'Playfair Display',serif;font-size:46px;color:white;text-shadow:0 6px 18px rgba(0,0,0,0.6)}
    .center-photo{display:block;margin:18px auto;width:480px;max-width:86%;border-radius:12px}
    .castle{position:absolute;left:50%;transform:translateX(-50%);top:8%;width:120%;opacity:0.28;pointer-events:none}
    .pilar-left,.pilar-right{position:absolute;top:6%;width:96px;height:320px;pointer-events:none}
    .pilar-left{left:6%}
    .pilar-right{right:6%}

    /* countdown */
    .countdown{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;justify-items:center;margin-top:12px}
    .cd-box{background:var(--card);padding:12px;border-radius:12px;min-width:86px;box-shadow:0 6px 18px rgba(2,6,23,0.12)}
    .cd-num{font-size:28px;font-weight:700}
    .cd-label{font-size:12px;margin-top:6px}
    .save-cal{display:inline-block;margin-top:12px;padding:10px 14px;border-radius:10px;background:var(--muted);cursor:pointer}
    .bird-vid{position:absolute;top:6%;left:50%;transform:translateX(-50%);width:120px;height:60px;pointer-events:none}

    /* ==== SLIDE 3 ==== */
    .pair{background:url('bg2.png') center/cover no-repeat;padding:48px 20px}
    .pair .row{display:flex;gap:16px;align-items:center;justify-content:center;flex-wrap:wrap;max-width:980px;margin:0 auto}
    .person{background:var(--card);padding:14px;border-radius:12px;display:flex;gap:12px;align-items:center;box-shadow:0 10px 30px rgba(2,6,23,0.12)}
    .person img{width:120px;height:120px;object-fit:cover;border-radius:12px;box-shadow:0 8px 22px rgba(0,0,0,0.15)}
    .ampersand{font-family:'Great Vibes',cursive;font-size:72px;margin:12px 0}

    /* ==== SLIDE 4 ==== */
    .quran{background:url('bgistana2.jpg') center/cover no-repeat;padding:48px}
    .verse{background:var(--glass);padding:20px;border-radius:12px;max-width:780px;text-align:center;box-shadow:0 8px 22px rgba(0,0,0,0.14)}
    .arab{font-size:26px;font-family:serif}

    /* ==== SLIDE 5 ==== */
    .white{background:linear-gradient(180deg,#fff,#fbfdff);padding:48px}
    .box{background:var(--card);padding:18px;border-radius:14px;max-width:520px;margin:0 auto;text-align:center}

    /* ==== SLIDE 6 ==== */
    .gift{background:url('bg2.png') center/cover no-repeat;padding:48px}
    .account{background:rgba(255,255,255,0.92);padding:14px;border-radius:12px;display:inline-block}

    /* ==== SLIDE 7 ==== */
    .greet{padding:36px}
    .greet-list{max-width:900px;margin:0 auto}
    .greet-item{background:var(--card);padding:12px;border-radius:10px;margin-bottom:10px}

    /* ==== SLIDE 8 ==== */
    .closing{background:url('bgistana.jpg') center/cover no-repeat;padding:48px}
    .thanks-box{background:linear-gradient(180deg, rgba(255,255,255,0.94), rgba(255,255,255,0.88));padding:22px;border-radius:14px;text-align:center}

    /* bottom controls */
    .controls{position:fixed;left:50%;transform:translateX(-50%);bottom:18px;display:flex;gap:10px;background:rgba(0,0,0,0.36);padding:8px;border-radius:999px;backdrop-filter:blur(6px);z-index:120}
    .icon-btn{background:transparent;border:none;color:white;padding:8px;border-radius:10px;cursor:pointer;display:flex;align-items:center;gap:8px}

    /* responsive tweaks */
    @media(max-width:900px){
      .cover .panel{padding:18px}
      .cover .names{font-size:36px}
      .center-photo{width:360px}
      .person img{width:96px;height:96px}
      .ampersand{font-size:54px}
      .countdown{grid-template-columns:repeat(2,1fr)}
    }
    @media(max-width:480px){
      .cover .panel{padding:14px}
      .cover .couple{width:160px;height:160px}
      .happy .happy-text{font-size:28px}
      .center-photo{width:280px}
      .cd-num{font-size:22px}
      .ampersand{font-size:46px}
      .a4-frame{padding:12px}
      .controls{bottom:12px}
    }

    /* small animation helpers */
    .fade-up{opacity:0;transform:translateY(18px);transition:all .8s cubic-bezier(.2,.9,.2,1)}
    .in-view{opacity:1;transform:none}
  </style>
</head>
<body>

  <div class="viewport" id="viewport">

    <!-- SLIDE 1: COVER (locked until open) -->
    <section class="slide cover" id="slide-1">
      <img class="badge-top" src="list1.png" alt="decoration">
      <img class="badge-bottom" src="list2.png" alt="decoration">
      <div class="a4-frame panel">
        <img src="pasangan.png" class="couple" alt="Pasangan">
        <div class="names">Lina &amp; Faqih</div>
        <p>Tanpa Mengurangi Rasa Hormat, Kami Mengundang Bapak/Ibu/Saudara/i untuk Hadir di Acara Kami</p>
        <div class="to-name">Kepada: <span id="toName">Bapak Budi</span></div>
        <div style="height:14px"></div>
        <button class="open-btn" id="openBtn">📩 Buka Undangan</button>
      </div>
      <div class="locked" id="lockLayer">
        <!-- ensures nothing clickable until open -->
      </div>
    </section>

    <!-- SLIDE 2: HAPPY WEDDING -->
    <section class="slide happy" id="slide-2">
      <div class="hero a4-frame">
        <div class="happy-text fade-up">Happy Wedding</div>
        <img src="istana.png" class="castle" aria-hidden="true">
        <img src="pilar.png" class="pilar-left" aria-hidden="true">
        <img src="pilar.png" class="pilar-right" aria-hidden="true">
        <img src="pasangantbg.png" class="center-photo fade-up" alt="Pasangan">

        <div class="fade-up" style="margin-top:12px">
          <div style="font-family:'Great Vibes',cursive;font-size:34px;color:var(--accent)">Faqih &amp; Lina</div>
        </div>

        <div class="countdown" id="countdown">
          <div class="cd-box fade-up"><div class="cd-num" id="days">0</div><div class="cd-label">Days</div></div>
          <div class="cd-box fade-up"><div class="cd-num" id="hours">00</div><div class="cd-label">Hours</div></div>
          <div class="cd-box fade-up"><div class="cd-num" id="minutes">00</div><div class="cd-label">Minutes</div></div>
          <div class="cd-box fade-up"><div class="cd-num" id="seconds">00</div><div class="cd-label">Seconds</div></div>
        </div>

        <div style="text-align:center;margin-top:12px" class="fade-up"><button id="saveCal" class="save-cal">Save to Calendar</button></div>

        <video src="burung.mp4" class="bird-vid" autoplay loop muted playsinline aria-hidden="true"></video>
      </div>
    </section>

    <!-- SLIDE 3: PAIR PROFILE -->
    <section class="slide pair" id="slide-3">
      <div class="a4-frame">
        <div class="arab fade-up" style="font-size:20px">بسم الله الرحمن الرحيم</div>
        <p class="fade-up">Atas Rahmat Allah SWT, Kami bermaksud mengundang Anda di acara kami. Merupakan suatu kehormatan dan kebahagiaan bagi kami sekeluarga apabila Bapak/Ibu/Saudara/i berkenan hadir dan memberikan doa restu.</p>

        <div class="row">
          <div class="person fade-up">
            <img src="lina.jpg" alt="Lina">
            <div style="text-align:left">
              <div style="font-family:'Great Vibes',cursive;font-size:20px">Marlina</div>
              <div>Putri dari Bapak Lina &amp; Ummi Lina</div>
              <div>Beralamat di Bogor</div>
            </div>
          </div>

          <div class="ampersand fade-up">&amp;</div>

          <div class="person fade-up">
            <img src="faqih.jpg" alt="Faqih">
            <div style="text-align:left">
              <div style="font-family:'Great Vibes',cursive;font-size:20px">Muhammad Faqih</div>
              <div>Putra dari Abi Faqih &amp; Mama Faqih</div>
              <div>Beralamat di Jakarta</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SLIDE 4: AYAT -->
    <section class="slide quran" id="slide-4">
      <img class="badge-top" src="list1.png" alt="decoration">
      <img class="badge-bottom" src="list2.png" alt="decoration">
      <div class="verse fade-up a4-frame">
        <div class="arab">وَمِنْ ءَايَاتِهِ أَنْ خَلَقَ لَكُم مِّنْ أَنفُسِكُمْ أَزْوَٰجًا لِّتَسْكُنُوا۟ٓ إِلَيْهَا ...</div>
        <div class="terjemah" style="margin-top:10px">Artinya: Dan di antara tanda-tanda-Nya ialah Dia menciptakan untukmu istri-istri dari jenismu sendiri... (Ar-Rum:21)</div>
      </div>
    </section>

    <!-- SLIDE 5: SAVE THE DATE -->
    <section class="slide white" id="slide-5">
      <div class="box fade-up">
        <div style="font-weight:700;margin-bottom:8px">Save The Date</div>
        <div style="font-size:20px">Akad &amp; Resepsi Pernikahan</div>
        <div>Desember</div>
        <div style="font-weight:700;margin-top:8px">Minggu | 14 | 2025</div>
        <div>08:00 WIB — Rumah Lina</div>
        <div style="margin-top:10px"><a id="mapLink" href="https://maps.app.goo.gl/UWhk7CUqkBS6rZ3Z9" target="_blank">📍 Buka Map Lokasi</a></div>
      </div>
    </section>

    <!-- SLIDE 6: TITIP HADIAH -->
    <section class="slide gift" id="slide-6">
      <div class="account fade-up a4-frame">
        <div style="font-weight:700;margin-bottom:8px">Titip Hadiah</div>
        <p>Doa restu Bapak/Ibu sekalian merupakan karunia yang sangat berarti bagi kami. Dan jika memberi merupakan ungkapan tanda kasih, Bapak/Ibu dapat memberi kado secara cashless. Terima kasih.</p>
        <div style="display:flex;gap:12px;align-items:center;justify-content:center;margin-top:8px;flex-wrap:wrap">
          <div style="text-align:left">
            <div style="font-weight:700">BCA — 1234567890</div>
            <div>a.n. Marlina</div>
          </div>
          <button class="copy-btn" data-copy="BCA - 1234567890">Copy</button>
        </div>
      </div>
    </section>

    <!-- SLIDE 7: UCAPAN -->
    <section class="slide" id="slide-7">
      <div class="greet a4-frame">
        <div style="font-weight:700;margin-bottom:12px">Ucapan & Doa</div>
        <div class="greet-list" id="greetList">
          <div class="greet-item">Semoga lancar acaranya — Bapak Budi</div>
        </div>
        <div style="margin-top:12px;display:flex;gap:8px;max-width:520px;margin-left:auto;margin-right:auto">
          <input id="greetInput" placeholder="Tulis pesan & nama" style="flex:1;padding:10px;border-radius:8px;border:1px solid #ddd">
          <button id="greetAdd" style="padding:10px;border-radius:8px">Kirim</button>
        </div>
      </div>
    </section>

    <!-- SLIDE 8: PENUTUP -->
    <section class="slide closing" id="slide-8">
      <div class="thanks-box a4-frame fade-up">
        <img src="pasangan.png" style="width:180px;height:180px;border-radius:12px;object-fit:cover">
        <div class="names" style="font-size:36px;color:var(--accent);margin-top:10px">Lina &amp; Faqih</div>
        <div style="margin-top:8px">Terima Kasih</div>
      </div>
    </section>

  </div>

  <!-- Controls (hidden until open) -->
  <div class="controls" id="controls" style="display:none">
    <button class="icon-btn" id="toggleAuto">⏯</button>
    <button class="icon-btn" id="muteBtn">🔈</button>
    <button class="icon-btn" data-target="slide-1" title="Cover">🏠</button>
    <button class="icon-btn" data-target="slide-2" title="Countdown">⏳</button>
    <button class="icon-btn" data-target="slide-5" title="SaveDate">📅</button>
  </div>

  <!-- audio element -->
  <audio id="bgMusic" src="lagu.mp3" loop preload="auto"></audio>

  <!-- snow canvas -->
  <canvas id="snowCanvas" style="position:fixed;left:0;top:0;pointer-events:none;z-index:60"></canvas>

  <script>
    // === helper: read recipient name from URL ===
    const params = new URLSearchParams(location.search);
    const guest = params.get('to') || params.get('nama') || params.get('kepada');
    if(guest){document.getElementById('toName').textContent = decodeURIComponent(guest);} 

    // === lock behavior ===
    const lockLayer = document.getElementById('lockLayer');
    const openBtn = document.getElementById('openBtn');
    const viewport = document.getElementById('viewport');
    const controls = document.getElementById('controls');
    const bgMusic = document.getElementById('bgMusic');

    openBtn.addEventListener('click', async ()=>{
      // remove lock and show controls
      lockLayer.style.display='none';
      controls.style.display='flex';
      // ensure top of viewport stays at slide 2 top
      document.getElementById('slide-2').scrollIntoView({behavior:'smooth'});
      // try play music (may be blocked in some browsers until user gesture which this is)
      try{ await bgMusic.play(); }catch(e){console.warn('audio play blocked',e)}
    });

    // === countdown to target (WIB) ===
    function updateCountdown(){
      // target: 14 Dec 2025 08:00 WIB -> UTC+7
      const targetUTC = Date.UTC(2025,11,14,1,0,0); // 08:00 WIB = 01:00 UTC
      const now = Date.now();
      let diff = Math.max(0, targetUTC - now);
      const days = Math.floor(diff / (1000*60*60*24));
      diff -= days*(1000*60*60*24);
      const hours = Math.floor(diff / (1000*60*60));
      diff -= hours*(1000*60*60);
      const minutes = Math.floor(diff / (1000*60));
      diff -= minutes*(1000*60);
      const seconds = Math.floor(diff/1000);
      document.getElementById('days').textContent = days;
      document.getElementById('hours').textContent = String(hours).padStart(2,'0');
      document.getElementById('minutes').textContent = String(minutes).padStart(2,'0');
      document.getElementById('seconds').textContent = String(seconds).padStart(2,'0');
    }
    updateCountdown(); setInterval(updateCountdown,1000);

    // === save to calendar (generate .ics and download) ===
    document.getElementById('saveCal').addEventListener('click', ()=>{
      const title = 'Akad & Resepsi — Lina & Faqih';
      const start = '20251214T010000Z';
      const end = '20251214T040000Z';
      const desc = 'Undangan pernikahan Lina & Faqih — Rumah Lina';
      const ics = `BEGIN:VCALENDAR
VERSION:2.0
BEGIN:VEVENT
UID:${Date.now()}@linafaqih
DTSTAMP:${start}
DTSTART:${start}
DTEND:${end}
SUMMARY:${title}
DESCRIPTION:${desc}
END:VEVENT
END:VCALENDAR`;
      const blob = new Blob([ics],{type:'text/calendar;charset=utf-8'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');a.href = url;a.download='lina-faqih.ics';document.body.appendChild(a);a.click();a.remove();
      URL.revokeObjectURL(url);
    });

    // === copy rekening ===
    document.querySelectorAll('.copy-btn').forEach(b=>b.addEventListener('click',(e)=>{const v=e.currentTarget.dataset.copy||'BCA - 1234567890';navigator.clipboard.writeText(v).then(()=>alert('Nomor rekening disalin: '+v)).catch(()=>prompt('Salin manual:',v))}))

    // === greetings add ===
    document.getElementById('greetAdd').addEventListener('click',(e)=>{e.preventDefault();const v=document.getElementById('greetInput').value.trim();if(!v)return alert('Isi pesan & nama');const it=document.createElement('div');it.className='greet-item';it.textContent=v;document.getElementById('greetList').prepend(it);document.getElementById('greetInput').value='';})

    // === controls: show/hide & nav ===
    document.querySelectorAll('.controls [data-target]').forEach(btn=>btn.addEventListener('click',()=>{const t=btn.dataset.target;document.getElementById(t).scrollIntoView({behavior:'smooth'})}))
    document.getElementById('muteBtn').addEventListener('click',()=>{bgMusic.muted=!bgMusic.muted;document.getElementById('muteBtn').textContent=bgMusic.muted?'🔇':'🔈'})

    // auto-scroll (gentle): only active after open; pause when user scrolls manually
    let auto = true;let autoTimer=null;const vp=document.getElementById('viewport');
    function startAuto(){stopAuto();autoTimer=setInterval(()=>{if(auto) vp.scrollBy({top:0.6,behavior:'smooth'})},40)}
    function stopAuto(){if(autoTimer)clearInterval(autoTimer);}
    document.getElementById('toggleAuto').addEventListener('click',()=>{auto=!auto;document.getElementById('toggleAuto').textContent=auto?'⏯':'⏸';})
    // start auto only after open
    openBtn.addEventListener('click',()=>{startAuto();});
    // if user scrolls manually, pause automatic for a short while
    let lastScroll=0;vp.addEventListener('scroll',()=>{lastScroll=Date.now();auto=false;setTimeout(()=>{if(Date.now()-lastScroll>2500)auto=true},2600)})

    // === IntersectionObserver to animate elements when they enter view ===
    const io = new IntersectionObserver((entries)=>{entries.forEach(ent=>{if(ent.isIntersecting){ent.target.classList.add('in-view');}})},{threshold:0.18});
    document.querySelectorAll('.fade-up').forEach(el=>io.observe(el));
    document.querySelectorAll('.cd-box').forEach(el=>io.observe(el));

    // === Snow effect (canvas) ===
    const snowCanvas = document.getElementById('snowCanvas');const sctx=snowCanvas.getContext('2d');let sw,sh;function resize(){sw=snowCanvas.width=window.innerWidth;sh=snowCanvas.height=window.innerHeight}window.addEventListener('resize',resize);resize();let flakes=[];for(let i=0;i<120;i++)flakes.push({x:Math.random()*sw,y:Math.random()*sh,r:Math.random()*3+1,d:Math.random()*2});function snowDraw(){sctx.clearRect(0,0,sw,sh);sctx.fillStyle='rgba(255,255,255,0.85)';flakes.forEach(f=>{sctx.beginPath();sctx.arc(f.x,f.y,f.r,0,Math.PI*2);sctx.fill();f.y += Math.pow(f.r,1.3)+0.2;f.x += Math.sin(f.d); if(f.y>sh){f.y=-10;f.x=Math.random()*sw}});requestAnimationFrame(snowDraw)}snowDraw();

    // === small accessibility / cleanup ===
    window.addEventListener('pagehide',()=>{bgMusic.pause();stopAuto();});

  </script>

</body>
</html>
